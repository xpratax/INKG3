<!--n√£o a nada para besta ver no meu codigo fonteüñï  -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema de Ingressos CACT</title>

<!-- Estilo b√°sico -->
<style>
    body {
        font-family: Arial, sans-serif;
        background: #111;
        color: #fff;
        margin: 0;
        padding: 20px;
    }

    h1 {
        text-align: center;
        margin-bottom: 20px;
    }

    button {
        padding: 12px 18px;
        border: none;
        background: #00d4ff;
        color: black;
        font-weight: bold;
        border-radius: 8px;
        cursor: pointer;
        margin: 10px 0;
    }
    button:hover { background: #0ff; }

    /* MODAL */
    .modal-bg {
        display: none;
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.7);
        justify-content: center;
        align-items: center;
    }

    .modal {
        background: #222;
        padding: 25px;
        border-radius: 12px;
        max-width: 600px;
        border: 1px solid #555;
    }

    .close {
        float: right;
        cursor: pointer;
        font-size: 22px;
    }

    .hidden { display: none; }
</style>
</head>
<body>

<h1>Sistema de Ingressos CACT</h1>

<!-- BOT√ÉO POL√çTICAS -->
<button onclick="openPoliticas()">üìÑ Ver Pol√≠ticas</button>

<!-- BOT√ÉO REGISTRAR VENDA -->
<button onclick="registrarVenda()">Registrar Venda de Ingresso</button>

<hr>
<h3>Total vendido:</h3>
<p id="vendas">0</p>

<h3>Minha comiss√£o ganha:</h3>
<p id="comissao">R$ 0,00</p>

<!-- MODAL DE POL√çTICAS -->
<div class="modal-bg" id="politicasModal">
    <div class="modal">
        <span class="close" onclick="fecharPoliticas()">√ó</span>
        <h2>Pol√≠ticas de Privacidade & Comiss√£o</h2>

        <p>
            Este sistema CACT permite registrar vendas de ingressos.
            Cada ingresso gera comiss√£o fixa baseada no valor vendido.
        </p>

        <p>
            Voc√™ receber√° <strong>R$0,10 de comiss√£o a cada R$1,00 vendido</strong>.
        </p>

        <p>
            A comiss√£o <strong>n√£o √© permanente</strong>.  
            Pode ser encerrada a qualquer momento sem aviso pr√©vio.
        </p>

        <button onclick="aceitarPoliticas()">Aceitar Pol√≠ticas</button>
        <button onclick="fecharPoliticas()">Fechar</button>
    </div>
</div>

<!-- SUPABASE -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
    /* ===========================
       CONFIG DO SUPABASE
    ============================ */
    const SUPABASE_URL = "COLOQUE_SUA_URL_AQUI";
    const SUPABASE_KEY = "COLOQUE_SUA_ANON_KEY_AQUI";
    const db = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    /* ===========================
        SISTEMA DE POL√çTICAS
    ============================ */
    function openPoliticas() {
        document.getElementById("politicasModal").style.display = "flex";
    }

    function fecharPoliticas() {
        document.getElementById("politicasModal").style.display = "none";
    }

    function aceitarPoliticas() {
        localStorage.setItem("politicasAceitas", "sim");
        fecharPoliticas();
        alert("Voc√™ aceitou as pol√≠ticas.");
    }

    // abrir automaticamente se n√£o foi aceito ainda
    if (localStorage.getItem("politicasAceitas") !== "sim") {
        setTimeout(openPoliticas, 300);
    }

    /* ===========================
        SISTEMA DE INGRESSOS (CACT)
    ============================ */

    let totalVendas = 0;
    let totalComissao = 0;

    async function registrarVenda() {
        const valor = Number(prompt("Valor do ingresso vendido (R$):"));

        if (!valor || valor <= 0) {
            alert("Valor inv√°lido.");
            return;
        }

        const comissaoGanha = valor * 0.10;

        totalVendas += valor;
        totalComissao += comissaoGanha;

        // atualiza tela
        document.getElementById("vendas").innerText = "R$ " + totalVendas.toFixed(2);
        document.getElementById("comissao").innerText = "R$ " + totalComissao.toFixed(2);

        // envia pro banco Supabase
        await db.from("ingressos").insert({
            valor: valor,
            comissao: comissaoGanha,
            data: new Date().toISOString()
        });

        alert("Venda registrada com sucesso!");
    }
</script>

</body>
</html>
